1.clone repository from my github link https://github.com/surenbaboyan/BDG_HomeWork.git

2.First Install Prometheus.

2.1.Update the System
 cmd: sudo apt update

2.2.Copy prometheus installer(see my git repository homework6 folder) to your ubuntu tmp directory
 cmd: cp prometheus-2.30.3.linux-amd64.tar.gz /home/YOUR_USER_NAME/tmp

2.3.Navigate to the tmp directory
 cmd:cd /home/YOUR_USER_NAME/tmp

2.4.Extract the prometheus-2.30.3.linux-amd64.tar.gz archive file
 cmd: tar xvzf prometheus-2.30.3.linux-amd64.tar.gz

2.5.Change directory to the extracted archive
 cmd:cd prometheus-2.30.0.linux-amd64

2.6.Create the configuration file directory.
 cmd:sudo mkdir /etc/prometheus

2.7.Create the data directory.
 cmd:sudo mkdir /var/lib/prometheus

2.8.Move the files prometheus and promtool to /usr/local/bin/
 cmd:sudo mv prometheus promtool /usr/local/bin/

2.9.Move console files in console directory and library files in console_libraries directory to /etc/prometheus/ directory
 cmd:sudo mv consoles/ console_libraries/ /etc/prometheus/
2.10.Move the configuration file prometheus.yml to /etc/prometheus/ directory
 cmd:sudo mv prometheus.yml /etc/prometheus/prometheus.yml
2.11.Create a prometheus group
 cmd:sudo groupadd --system prometheus
2.12.Create a user prometheus and assign it to the prometheus group
 cmd:sudo useradd -s /sbin/nologin --system -g prometheus prometheus
2.13.Set the ownership
 cmd:sudo chown -R prometheus:prometheus /etc/prometheus/  /var/lib/prometheus/
 cmd:sudo chmod -R 775 /etc/prometheus/ /var/lib/prometheus/
2.14.Create service file for Prometheus to start
 cmd:sudo nano /etc/systemd/system/prometheus.service
[Unit]
  Description=Prometheus
  Wants=network-online.target
  After=network-online.target

[Service]
  User=prometheus
  Group=prometheus
  Restart=always
  Type=simple
  ExecStart=/usr/local/bin/prometheus \
    --config.file=/etc/prometheus/prometheus.yml \
    --storage.tsdb.path=/var/lib/prometheus/ \
    --web.console.templates=/etc/prometheus/consoles \
    --web.console.libraries=/etc/prometheus/console_libraries \
    --web.listen-address=0.0.0.0:9090

[Install]
  WantedBy=multi-user.target
2.15 Start the Prometheus service and enable
 cmd:sudo systemctl start prometheus
 cmd:sudo systemctl enable prometheus
2.16 Check the status of the Prometheus service is enabled and running
 cmd:sudo systemctl status prometheus
2.17 Access the Prometheus:on browser at port 9090
http://localhost:9090

3 Install Node Exporter to your system
3.1 Copy node-exporter installer (see my git repository homework6 folder) to your ubuntu user tmp directory
 cmd: cp node_exporter-1.2.2.linux-amd64.tar.gz /home/YOUR_USER_NAME/tmp
3.2.Extract the node_exporter-1.2.2.linux-amd64.tar.gz archive
 cmd:tar xzf node_exporter-1.2.2.linux-amd64.tar.gz
3.3.Move the node_exporter binary file from the node_exporter-1.2.2.linux-amd64/ directory to the /usr/local/bin/ directory
 cmd:sudo mv -v node_exporter-1.1.2.linux-amd64/node_exporter /usr/local/bin/
3.4 change user and group for this file
 cmd:sudo chown root:root /usr/local/bin/node_exporter
3.5 create node-exporter.service
 cmd:sudo nano /etc/systemd/system/node-exporter.service
 and add this lines then save
 [Unit]
   Description=Prometheus exporter for machine metrics

 [Service]
  Restart=always
  User=prometheus
  ExecStart=/usr/local/bin/node_exporter
  ExecReload=/bin/kill -HUP $MAINPID
  TimeoutStopSec=20s
  SendSIGKILL=no

 [Install]
  WantedBy=multi-user.target
3.6 cmd:sudo systemctl daemon-reload
3.7 start the node-exporter service and enable
 cmd:sudo systemctl start node-exporter.service
 cmd:sudo systemctl enable node-exporter.service
3.8 check the status is enabled and runnig
 cmd:sudo systemctl status node-exporter.service
3.9 check Node Exporter is working url: http://localhost:9100/metrics
4. Adding Node Exporter to Prometheus
4.1 you can copy prometheus.yml config file from my repo homework5 directory and replace your prometheus.yml file
4.2 restart Prometheus service
 cmd:sudo systemctl restart prometheus.service
4.3 now visit http://localhost:9090/targets and you should see entry node_exporter.

5 Install Grafana. the installer .deb file you can see my git repository homework6 folder
 cmd: sudo dpkg -i grafana_8.2.2_amd64.deb
5.1 Start Grafana service.
 cmd:sudo systemctl enable --now grafana-server
5.2 check the status grafana server
 cmd:sudo systemctl status grafana-server.service
5.3 access from web http://localhost:3000 default pass admin/admin

6. configure grafana.
6.1 login the grafana server.
6.2 Navigate to the datasours and add prometheus URL link (localhost:9090)
6.3 import node exporter dashboard (you can use id 1860)
6.4 done!
